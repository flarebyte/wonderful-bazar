'use strict'
init = require("fb-custom-init")
magma_contact = require('magma-contact')
should = require('should')
CT = require('magma-constant')
_ = require('lodash')


###
======== A Handy Little Mocha Reference ========
https://github.com/visionmedia/should.js
https://github.com/visionmedia/mocha
###

validContact =
  accepted:         "true"
  contactTags:      []
  #gateId:           CT.EX_GATE_ID
  id:               CT.EX_CONTACT_ID
  important:        "false"
  profileRef:       CT.EX_OWNER_U3
  #ownerRef:         CT.EX_EMAIL_U1
  spam:             "false"

myself=
  ownerRef:         CT.EX_OWNER_U1
  gateId:           CT.EX_GATE_ID
  ownerRefs:        [CT.EX_OWNER_U1,CT.EX_OWNER_U2]

userCtx=
  my: myself

describe "magma-contact", ->

  describe 'pkGenerator()', ()->
    it 'generate id', ()->
      v= magma_contact.pkGenerator(userCtx, validContact)
      v.should.be.eql(
        'magma:f/contact/123456789/'+
        'e96bb8fec9f5d947c0d8a01842901636650617693054fbba17a4cf0f3e01b601')
