'use strict'
init = require("fb-custom-init")
magma_message = require('magma-message')
should = require('should')
CT = require('magma-constant')
_ = require('lodash')


###
======== A Handy Little Mocha Reference ========
https://github.com/visionmedia/should.js
https://github.com/visionmedia/mocha
###

validMessage =
  accepted:         "true"
  contactTags:      []
  id:               CT.EX_MESSAGE_ID
  important:        "false"
  profileRef:       CT.EX_OWNER_U3
  spam:             "false"

myself=
  ownerRef:         CT.EX_OWNER_U1
  gateId:           CT.EX_GATE_ID
  ownerRefs:        [CT.EX_OWNER_U1,CT.EX_OWNER_U2]

userCtx=
  my: myself

describe 'magma-message', ()->
  describe 'pkGenerator()', ()->
    it 'generate id', ()->
      v= magma_message.pkGenerator(userCtx, validMessage)
      v.should.be.eql 'magma:f/msg/123456789012345678901234'
